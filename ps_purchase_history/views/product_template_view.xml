<?xml version="1.0" encoding="UTF-8" ?>
<odoo>
    <!-- Keep your existing product template view -->
    <record id="inherit_product_template_form_view" model="ir.ui.view">
        <field name="name">inherit.product.template.form.view</field>
        <field name="model">product.template</field>
        <field name="inherit_id" ref="product.product_template_only_form_view"/>
        <field name="arch" type="xml">
             <xpath expr="//div[@name='button_box']" position="inside">
                <button name="open_purchase_product_history_wizard"
                        type="object"
                        class="oe_stat_button"
                        icon="fa-history">
                    <div class="o_stat_info">
                        <span class="o_stat_text">Purchase History</span>
                    </div>
                </button>
            </xpath>
        </field>
    </record>

    <!-- Add to Purchase Order Line Tree View -->
    <record id="inherit_purchase_order_line_tree" model="ir.ui.view">
        <field name="name">inherit.purchase.order.line.tree</field>
        <field name="model">purchase.order.line</field>
        <field name="inherit_id" ref="purchase.purchase_order_line_tree"/>
        <field name="arch" type="xml">
            <field name="product_id" position="after">
                <button name="action_open_purchase_history"
                        type="object"
                        icon="fa-history"
                        title="Purchase History"
                        class="btn-link"
                        invisible="not product_id"/>
            </field>
        </field>
    </record>
</odoo>