<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Show only our custom template in portal preview -->
    <template id="custom_portal_sale_order" inherit_id="sale.sale_order_portal_content" priority="100">

        <!-- Replace the details section content -->
        <xpath expr="//section[@id='details']" position="replace">
            <section id="details" class="mt-4">
                <style>
                    /* Hide any remaining default sale order tables/content that might appear */
                    #portal_sale_content table.table,
                    .o_portal_html_view {
                        display: none !important;
                    }
                </style>

                <!-- Show ONLY our custom report -->
                <t t-set="o" t-value="sale_order"/>
                <t t-set="docs" t-value="[sale_order]"/>
                <t t-call="custom_sa_quotation.custom_saleorder_report"/>
            </section>
        </xpath>

    </template>
</odoo>