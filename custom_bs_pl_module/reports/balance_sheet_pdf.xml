<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- ✅ Custom Balance Sheet PDF Template -->
    <template id="report_custom_balance_sheet">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="web.external_layout">
                    <div class="page">
                        <h2 style="text-align:center;">Custom Balance Sheet</h2>
                        <p style="text-align:center;">
                            <strong>Company:</strong> <t t-esc="o.company_id.name"/>
                        </p>
                        <p style="text-align:center;">
                            <strong>Period:</strong>
                            <t t-esc="o.date_from"/> → <t t-esc="o.date_to"/>
                        </p>

                        <table class="table table-sm o_main_table" style="width:100%; margin-top:10px;">
                            <thead>
                                <tr style="background:#f0f0f0;">
                                    <th>Account</th>
                                    <th style="text-align:right;">Debit</th>
                                    <th style="text-align:right;">Credit</th>
                                    <th style="text-align:right;">Balance</th>
                                </tr>
                            </thead>
                            <tbody>
                                <t t-foreach="o._get_balance_sheet_lines()" t-as="line">
                                    <tr>
                                        <td><t t-esc="line['account_name']"/></td>
                                        <td style="text-align:right;"><t t-esc="line['debit']"/></td>
                                        <td style="text-align:right;"><t t-esc="line['credit']"/></td>
                                        <td style="text-align:right;"><t t-esc="line['balance']"/></td>
                                    </tr>
                                </t>
                            </tbody>
                        </table>

                        <p style="margin-top:10px;">
                            <strong>Total Debit:</strong>
                            <t t-esc="sum([x['debit'] for x in o._get_balance_sheet_lines()])"/>
                            &#160;&#160;&#160;
                            <strong>Total Credit:</strong>
                            <t t-esc="sum([x['credit'] for x in o._get_balance_sheet_lines()])"/>
                        </p>
                    </div>
                </t>
            </t>
        </t>
    </template>

    <!-- ✅ Report Action for Balance Sheet -->
    <report
        id="action_custom_balance_sheet_pdf"
        model="accounting.report"
        string="Balance Sheet PDF"
        report_type="qweb-pdf"
        name="custom_bs_pl_module.report_custom_balance_sheet"
        file="custom_bs_pl_module.report_custom_balance_sheet"
        print_report_name="'Balance Sheet - %s' % (object.date_to or '')"
    />
</odoo>
