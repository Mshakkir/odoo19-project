<odoo>
    <template id="report_saleorder_document" inherit_id="sale.report_saleorder_document">

        <!-- 1. Create custom variable display_discount_fixed -->
        <xpath expr="//t[@t-call='sale.order_line_table']" position="before">
            <t t-set="display_discount_fixed"
               t-value="any([l.discount_fixed for l in doc.order_line])"/>
        </xpath>

        <!-- 2. Hide original discount column header -->
        <xpath expr="//th[@name='th_discount']" position="attributes">
            <attribute name="t-if">not display_discount_fixed</attribute>
        </xpath>

        <!-- 3. Add new column header for fixed discount -->
        <xpath expr="//th[@name='th_discount']" position="after">
            <th t-if="display_discount_fixed">
                <span>Discount Amount (%)</span>
            </th>
        </xpath>

        <!-- 4. Insert fixed discount before normal discount -->
        <xpath expr="//span[@t-field='line.discount']" position="before">
            <t t-if="display_discount_fixed">
                <span class="text-nowrap" t-field="line.discount_fixed"/>
                <span> (or </span>
            </t>
        </xpath>

        <!-- 5. Insert closing bracket after normal discount -->
        <xpath expr="//span[@t-field='line.discount']" position="after">
            <t t-if="display_discount_fixed">
                <span> %)</span>
            </t>
        </xpath>

    </template>
</odoo>
