<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Dynamic Category Page Template -->
    <template id="category_page_template" name="Dynamic Category Page">
        <t t-call="website.layout">
            <div id="wrap" class="oe_structure">
                <!-- Hero Section -->
                <section class="s_parallax parallax s_parallax_is_fixed bg-black-50 o_half_screen_height o_colored_level"
                         data-scroll-background-ratio="1" data-snippet="s_parallax">
                    <span class="s_parallax_bg oe_img_bg o_bg_img_center"
                          style="background-image: url('/web/static/img/website_placeholder.jpg'); background-position: 50% 75%;"/>
                    <div class="o_we_bg_filter bg-black-50"/>
                    <div class="container h-100">
                        <div class="row h-100 align-items-center justify-content-center">
                            <div class="col-lg-8 text-center text-white">
                                <h1 class="display-3 font-weight-bold mb-3">Product Categories</h1>
                                <p class="lead">Explore our comprehensive range of industrial automation products</p>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- Dynamic Category Section -->
                <section class="s_embed_code pt-5 pb-5 o_colored_level" data-snippet="s_embed_code">
                    <div class="container my-5 animate-on-scroll">
                        <h2 class="text-center mb-4">Explore Our Product Categories</h2>

                        <div class="category-slider-wrapper">
                            <button class="slider-arrow left" onclick="scrollCategories(-1)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="15 18 9 12 15 6"/>
                                </svg>
                            </button>

                            <div class="category-tabs-container">
                                <div class="category-tabs" id="categoryTabs">
                                    <t t-foreach="categories" t-as="category">
                                        <button class="cat-btn"
                                                t-att-class="'active' if category_index == 0 else ''"
                                                t-att-onclick="'showCategory(\'' + category['slug'] + '\', this)'">
                                            <t t-esc="category['name']"/>
                                        </button>
                                    </t>
                                </div>
                            </div>

                            <button class="slider-arrow right" onclick="scrollCategories(1)">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="9 18 15 12 9 6"/>
                                </svg>
                            </button>
                        </div>

                        <div class="category-content">
                            <t t-foreach="categories" t-as="category">
                                <div t-att-id="category['slug']"
                                     class="cat-panel"
                                     t-att-class="'active' if category_index == 0 else ''">
                                    <div class="row align-items-center">
                                        <div class="col-md-6">
                                            <h3><t t-esc="category['name']"/></h3>
                                            <p><t t-esc="category['description']"/></p>
                                            <ul>
                                                <t t-foreach="category['features']" t-as="feature">
                                                    <li><t t-esc="feature"/></li>
                                                </t>
                                            </ul>
                                            <a t-att-href="category['url']" class="btn btn-primary mt-3">
                                                View Products (<t t-esc="category['product_count']"/>)
                                            </a>
                                        </div>
                                        <div class="col-md-6 text-center">
                                            <img t-att-src="category['image_url']"
                                                 class="img-fluid rounded"
                                                 t-att-alt="category['name']"
                                                 loading="lazy"
                                                 style="max-height: 400px; object-fit: contain;"/>
                                        </div>
                                    </div>
                                </div>
                            </t>
                        </div>
                    </div>
                </section>
            </div>
        </t>
    </template>

    <!-- Add CSS and JS to website assets -->
    <template id="category_assets_backend" name="Category Assets Backend" inherit_id="web.assets_backend">
        <xpath expr="." position="inside">
            <link rel="stylesheet" type="text/scss" href="/dynamic_category/static/src/scss/category_page.scss"/>
        </xpath>
    </template>

    <template id="category_assets_frontend" name="Category Assets" inherit_id="website.assets_frontend">
        <xpath expr="." position="inside">
            <link rel="stylesheet" type="text/scss" href="/dynamic_category/static/src/scss/category_page.scss"/>
            <script type="text/javascript" src="/dynamic_category/static/src/js/category_slider.js"/>
        </xpath>
    </template>

    <!-- Add menu item (optional) -->
    <record id="menu_category_page" model="website.menu">
        <field name="name">Categories</field>
        <field name="url">/shop/categories</field>
        <field name="parent_id" ref="website.main_menu"/>
        <field name="sequence" type="int">50</field>
    </record>
</odoo>