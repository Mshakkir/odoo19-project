<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data noupdate="1">

        <!-- Sequence for Transfer Request -->
        <record id="seq_warehouse_transfer_request" model="ir.sequence">
            <field name="name">Warehouse Transfer Request</field>
            <field name="code">warehouse.transfer.request</field>
            <field name="prefix">WTR/</field>
            <field name="padding">5</field>
            <field name="company_id" eval="False"/>
        </record>

        <!-- Email Template: Request Submitted -->
        <record id="email_template_request_submit" model="mail.template">
            <field name="name">Warehouse Transfer Request: Submitted</field>
            <field name="model_id" ref="model_warehouse_transfer_request"/>
            <field name="subject">Transfer Request {{ object.name }} - Approval Required</field>
            <field name="email_to">{{ object.source_warehouse_id.partner_id.email or '' }}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <h2 style="color: #875A7B; margin-top: 0;">New Transfer Request for Approval</h2>

                        <p>Dear <strong>{{ object.source_warehouse_id.name }}</strong> Team,</p>

                        <p>A new transfer request has been submitted and requires your approval:</p>

                        <div style="background-color: #f8f9fa; padding: 15px; border-radius: 5px; margin: 20px 0;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Request Number:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Requested By:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.user_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>From Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.source_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>To Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.dest_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Request Date:</strong></td>
                                    <td style="padding: 8px 0;">{{ format_datetime(object.request_date, dt_format='dd/MM/yyyy HH:mm') }}</td>
                                </tr>
                            </table>
                        </div>

                        <h3 style="color: #875A7B; margin-top: 25px;">Requested Products:</h3>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <thead>
                                <tr style="background-color: #875A7B; color: white;">
                                    <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Product</th>
                                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Quantity</th>
                                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Available</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for line in object.line_ids %}
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">{{ line.product_id.name }}</td>
                                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">{{ line.quantity }} {{ line.product_uom_id.name }}</td>
                                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">{{ line.available_qty }} {{ line.product_uom_id.name }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        {% if object.notes %}
                        <div style="margin: 20px 0;">
                            <strong>Notes:</strong>
                            <p style="background-color: #f8f9fa; padding: 10px; border-radius: 5px;">{{ object.notes }}</p>
                        </div>
                        {% endif %}

                        <div style="margin-top: 30px; text-align: center;">
                            <a href="/web#id={{ object.id }}&amp;model=warehouse.transfer.request&amp;view_type=form"
                               style="background-color: #875A7B; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Request
                            </a>
                        </div>

                        <p style="margin-top: 30px; font-size: 12px; color: #666;">
                            This is an automated notification from your Odoo system.
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Email Template: Request Approved -->
        <record id="email_template_request_approve" model="mail.template">
            <field name="name">Warehouse Transfer Request: Approved</field>
            <field name="model_id" ref="model_warehouse_transfer_request"/>
            <field name="subject">Transfer Request {{ object.name }} - Approved</field>
            <field name="email_to">{{ object.user_id.email }}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <span style="font-size: 48px; color: #28a745;">âœ“</span>
                        </div>

                        <h2 style="color: #28a745; text-align: center; margin-top: 0;">Request Approved!</h2>

                        <p>Dear <strong>{{ object.user_id.name }}</strong>,</p>

                        <p>Your transfer request <strong>{{ object.name }}</strong> has been approved.</p>

                        <div style="background-color: #d4edda; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #28a745;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0;"><strong>From Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.source_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>To Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.dest_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Delivery Order:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.delivery_picking_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Receipt Order:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.receipt_picking_id.name }}</td>
                                </tr>
                            </table>
                        </div>

                        <p>The delivery and receipt orders have been automatically created. The source warehouse will process the delivery shortly.</p>

                        <div style="margin-top: 30px; text-align: center;">
                            <a href="/web#id={{ object.id }}&amp;model=warehouse.transfer.request&amp;view_type=form"
                               style="background-color: #875A7B; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Request Details
                            </a>
                        </div>

                        <p style="margin-top: 30px; font-size: 12px; color: #666;">
                            This is an automated notification from your Odoo system.
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Email Template: Request Rejected -->
        <record id="email_template_request_reject" model="mail.template">
            <field name="name">Warehouse Transfer Request: Rejected</field>
            <field name="model_id" ref="model_warehouse_transfer_request"/>
            <field name="subject">Transfer Request {{ object.name }} - Rejected</field>
            <field name="email_to">{{ object.user_id.email }}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <span style="font-size: 48px; color: #dc3545;">âœ—</span>
                        </div>

                        <h2 style="color: #dc3545; text-align: center; margin-top: 0;">Request Rejected</h2>

                        <p>Dear <strong>{{ object.user_id.name }}</strong>,</p>

                        <p>Unfortunately, your transfer request <strong>{{ object.name }}</strong> has been rejected.</p>

                        <div style="background-color: #f8d7da; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #dc3545;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0;"><strong>From Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.source_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>To Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.dest_warehouse_id.name }}</td>
                                </tr>
                            </table>
                        </div>

                        {% if object.rejection_reason %}
                        <div style="margin: 20px 0;">
                            <strong style="color: #dc3545;">Rejection Reason:</strong>
                            <p style="background-color: #f8d7da; padding: 15px; border-radius: 5px; margin-top: 10px;">
                                {{ object.rejection_reason }}
                            </p>
                        </div>
                        {% endif %}

                        <p>Please contact the source warehouse team if you have any questions or need to submit a revised request.</p>

                        <div style="margin-top: 30px; text-align: center;">
                            <a href="/web#id={{ object.id }}&amp;model=warehouse.transfer.request&amp;view_type=form"
                               style="background-color: #875A7B; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Request Details
                            </a>
                        </div>

                        <p style="margin-top: 30px; font-size: 12px; color: #666;">
                            This is an automated notification from your Odoo system.
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Email Template: In Transit Notification -->
        <record id="email_template_request_in_transit" model="mail.template">
            <field name="name">Warehouse Transfer Request: In Transit</field>
            <field name="model_id" ref="model_warehouse_transfer_request"/>
            <field name="subject">Transfer Request {{ object.name }} - Products In Transit</field>
            <field name="email_to">{{ object.dest_warehouse_id.partner_id.email or '' }}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <h2 style="color: #17a2b8; margin-top: 0;">ðŸšš Products In Transit</h2>

                        <p>Dear <strong>{{ object.dest_warehouse_id.name }}</strong> Team,</p>

                        <p>Products from transfer request <strong>{{ object.name }}</strong> are now in transit to your warehouse.</p>

                        <div style="background-color: #d1ecf1; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #17a2b8;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0;"><strong>From Warehouse:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.source_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Receipt Order:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.receipt_picking_id.name }}</td>
                                </tr>
                            </table>
                        </div>

                        <h3 style="color: #875A7B;">Products to Receive:</h3>
                        <table style="width: 100%; border-collapse: collapse; margin: 15px 0;">
                            <thead>
                                <tr style="background-color: #875A7B; color: white;">
                                    <th style="padding: 10px; text-align: left; border: 1px solid #ddd;">Product</th>
                                    <th style="padding: 10px; text-align: center; border: 1px solid #ddd;">Quantity</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for line in object.line_ids %}
                                <tr>
                                    <td style="padding: 10px; border: 1px solid #ddd;">{{ line.product_id.name }}</td>
                                    <td style="padding: 10px; text-align: center; border: 1px solid #ddd;">{{ line.quantity }} {{ line.product_uom_id.name }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>

                        <p>Please prepare to receive these products. You can validate the receipt order once the products arrive.</p>

                        <div style="margin-top: 30px; text-align: center;">
                            <a href="/web#id={{ object.receipt_picking_id.id }}&amp;model=stock.picking&amp;view_type=form"
                               style="background-color: #17a2b8; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Receipt Order
                            </a>
                        </div>

                        <p style="margin-top: 30px; font-size: 12px; color: #666;">
                            This is an automated notification from your Odoo system.
                        </p>
                    </div>
                </div>
            </field>
        </record>

        <!-- Email Template: Received Notification -->
        <record id="email_template_request_received" model="mail.template">
            <field name="name">Warehouse Transfer Request: Received</field>
            <field name="model_id" ref="model_warehouse_transfer_request"/>
            <field name="subject">Transfer Request {{ object.name }} - Products Received</field>
            <field name="email_to">{{ object.user_id.email }}</field>
            <field name="body_html" type="html">
                <div style="font-family: Arial, sans-serif; padding: 20px; background-color: #f5f5f5;">
                    <div style="max-width: 600px; margin: 0 auto; background-color: white; border-radius: 8px; padding: 30px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <span style="font-size: 48px; color: #28a745;">âœ“</span>
                        </div>

                        <h2 style="color: #28a745; text-align: center; margin-top: 0;">Products Received!</h2>

                        <p>Dear <strong>{{ object.user_id.name }}</strong>,</p>

                        <p>The products from your transfer request <strong>{{ object.name }}</strong> have been successfully received at <strong>{{ object.dest_warehouse_id.name }}</strong>.</p>

                        <div style="background-color: #d4edda; padding: 15px; border-radius: 5px; margin: 20px 0; border-left: 4px solid #28a745;">
                            <table style="width: 100%; border-collapse: collapse;">
                                <tr>
                                    <td style="padding: 8px 0;"><strong>Transfer Complete:</strong></td>
                                    <td style="padding: 8px 0;">{{ format_datetime(now(), dt_format='dd/MM/yyyy HH:mm') }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>From:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.source_warehouse_id.name }}</td>
                                </tr>
                                <tr>
                                    <td style="padding: 8px 0;"><strong>To:</strong></td>
                                    <td style="padding: 8px 0;">{{ object.dest_warehouse_id.name }}</td>
                                </tr>
                            </table>
                        </div>

                        <p style="background-color: #d4edda; padding: 15px; border-radius: 5px; text-align: center; font-weight: bold; color: #28a745;">
                            Your transfer request has been completed successfully!
                        </p>

                        <div style="margin-top: 30px; text-align: center;">
                            <a href="/web#id={{ object.id }}&amp;model=warehouse.transfer.request&amp;view_type=form"
                               style="background-color: #875A7B; color: white; padding: 12px 30px; text-decoration: none; border-radius: 5px; display: inline-block;">
                                View Request Details
                            </a>
                        </div>

                        <p style="margin-top: 30px; font-size: 12px; color: #666;">
                            This is an automated notification from your Odoo system.
                        </p>
                    </div>
                </div>
            </field>
        </record>

    </data>
</odoo>