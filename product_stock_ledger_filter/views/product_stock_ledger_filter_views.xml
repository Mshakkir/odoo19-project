<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
        Override the window action to use our custom 'stock_ledger_list' view type
        which injects the OWL filter bar controller.
    -->
    <record id="action_stock_ledger_with_filter" model="ir.actions.act_window">
        <field name="name">Product Stock Ledger</field>
        <field name="res_model">product.stock.ledger</field>
        <field name="view_mode">list</field>
        <field name="views" eval="[(False, 'stock_ledger_list')]"/>
        <field name="context">{}</field>
        <field name="help" type="html">
            <p class="o_view_nocontent_smiling_face">No stock movements found.</p>
        </field>
    </record>

    <!-- Point menu items to the new action -->
    <record id="product_stock_ledger.menu_product_stock_ledger_inventory" model="ir.ui.menu">
        <field name="action" ref="action_stock_ledger_with_filter"/>
    </record>
    <record id="product_stock_ledger.menu_product_stock_ledger_purchase" model="ir.ui.menu">
        <field name="action" ref="action_stock_ledger_with_filter"/>
    </record>
    <record id="product_stock_ledger.menu_product_stock_ledger_sales" model="ir.ui.menu">
        <field name="action" ref="action_stock_ledger_with_filter"/>
    </record>
</odoo>
