<odoo>
    <template id="custom_saleorder_report" inherit_id="sale.report_saleorder_document">
        <xpath expr="//t[@t-call='web.external_layout']" position="replace">
            <t t-call="web.external_layout_minimal">
                <t t-foreach="docs" t-as="doc">

                    <head>
                        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
                        <style type="text/css">
                            @font-face {
                                font-family: 'NotoNaskhArabic';
                                src: url('/custom_sa_quotation/static/src/fonts/NotoNaskhArabic-VariableFont_wght.ttf') format('truetype');
                            }
                            body, * {
                                font-family: 'NotoNaskhArabic', sans-serif !important;
                            }
                        </style>
                    </head>

                    <div style="border: 3px solid black; padding: 15px; border-radius: 5px;">
                        <!-- ===== Header ===== -->
                        <div class="page">
                            <div class="header"
                                 style="display: flex; padding: 15px 20px; border:2px solid #800000; border-radius: 6px; background: white; margin-bottom: 15px;">
                                <table style="width: 100%; border-collapse: collapse;">
                                    <tr>
                                        <!-- Left: English Info -->
                                        <td style="width: 33%; text-align: left; font-size: 13px; vertical-align: top; padding-right: 10px;">
                                            <div style="font-weight: 700; font-size: 16px; color: #800000; margin-bottom: 8px;">
                                                SAMEER SHARAF AL OTAIBI TRADING COMPANY
                                            </div>
                                            <div style="line-height: 1.5;">
                                                C.R. 4030216154<br/>
                                                VAT Regd: 311299944700003<br/>
                                                Al Anwar Centre, Showroom No. 12,<br/>
                                                Baladiya Street, Jeddah 23334 - Saudi Arabia<br/>
                                                Tel: 0536122833<br/>
                                                Email: ssaoe.jeddah@gmail.com
                                            </div>
                                        </td>

                                        <!-- Center: Logo -->
                                        <td style="width: 33%; text-align: center; vertical-align: middle;">
                                            <t t-if="doc.company_id.logo">
                                                <img t-att-src="image_data_uri(doc.company_id.logo)"
                                                     style="max-height: 130px; max-width: 100%; object-fit: contain;"/>
                                            </t>
                                        </td>

                                        <!-- Right: Arabic Info -->
                                        <td style="width: 33%; text-align: right; font-size: 13px; vertical-align: top; padding-left: 10px; direction: rtl;">
                                            <div style="font-weight: 900; font-size: 18px; color: #800000; margin-bottom: 8px;">
                                                شركة سمير شرف العتيبي التجارية
                                            </div>
                                            <div style="line-height: 1.5;">
                                                ٤٠٣٠٢١٦١٥٤ :س.ت<br/>
                                                ٣١١٢٩٩٩٤٤٧٠٠٠٠٣ :الرقم الضريبي<br/>
                                                مركز الأنوار، رقم محل ١٢<br/>
                                                شارع البلدية، جدة ٢٣٣٣٤ - المملكة العربية السعودية<br/>
                                                ٠٥٣٦١٢٢٨٣٣ :هاتف<br/>
                                                ssaoe.jeddah@gmail.com :البريد الإلكتروني
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>

                        <!-- ===== Title ===== -->
                        <div style="padding-top:50px;">
                            <div style="background-color:#581d35; color:white; padding:8px; text-align:center; margin-bottom:10px; font-weight:bold; font-size:16px;">
                                Quotation / <span>عرض سعر</span>
                            </div>
                        </div>

                        <!-- ===== Customer & Quote Info ===== -->
                        <table width="100%" style="border: 1px solid #000; border-collapse: collapse; font-size: 13px; margin: 5px 0;">
                            <tr>
                                <td width="50%" style="border-right: 1px solid #000; vertical-align: top; padding: 10px;">
                                    <div style="font-weight: bold; padding: 5px; margin-bottom: 5px; background-color: #9e9d9d; color:#080808;">
                                        Customer Name &amp; Address / <span>اسم العميل وعنوانه</span>
                                    </div>
                                    <div>
                                        Attn: <span t-esc="doc.partner_id.name"/><br/>
                                        <span t-esc="doc.partner_id.city"/><br/>
                                        MOB: <span t-esc="doc.partner_id.phone or ''"/>
                                    </div>
                                </td>
                                <td width="50%" style="vertical-align: top; padding: 10px;">
                                    <div style="font-weight: bold; padding: 5px; margin-bottom: 5px; background-color: #9e9d9d; color:#080808;">
                                        Quote / Project Description / <span>عرض سعر</span>
                                    </div>
                                    <div>
                                        Date: <span t-field="doc.date_order"/><br/>
                                        Our Reference: <span t-esc="doc.name"/><br/>
                                        Your Reference: <span t-esc="doc.client_order_ref or '-'"/>
                                    </div>
                                </td>
                            </tr>
                        </table>

                        <!-- ===== Order Lines ===== -->
                        <table width="100%" border="1" style="border-collapse: collapse; font-size: 13px; margin-top:10px;" cellpadding="5">
                            <thead style="background-color: #9e9d9d;">
                                <tr>
                                    <th style="width:2%;text-align:center;">SN</th>
                                    <th style="width:15%;text-align:center;">Item Description<br/><span>المنتج الوصف</span></th>
                                    <th style="width:3%;text-align:center;">Duration<br/><span>مدة</span></th>
                                    <th style="width:3%;text-align:center;">QTY<br/><span>الكمية</span></th>
                                    <th style="width:3%;text-align:center;">U/M<br/><span>وحدة</span></th>
                                    <th style="width:3%;text-align:center;">Unit Price<br/><span>سعر الوحدة</span></th>
                                    <th style="width:3%;text-align:center;">Line Total<br/><span>مجموع الخط</span></th>
                                </tr>
                            </thead>
                            <tbody style="text-align:center;">
                                <tr t-foreach="doc.order_line" t-as="line">
                                    <td><t t-esc="line.sequence or loop.index"/></td>
                                    <td><span t-field="line.name"/></td>
                                    <td>2-3 Weeks</td>
                                    <td><span t-field="line.product_uom_qty"/></td>
                                    <td><span t-esc="line.product_uom_id.name or ''"/></td>
                                    <td><span t-field="line.price_unit"/></td>
                                    <td><span t-field="line.price_subtotal"/></td>
                                </tr>
                            </tbody>
                        </table>

                        <!-- ===== Totals & Notes ===== -->
                        <table width="100%" style="font-size: 13px; margin-top: 10px;">
                            <tr>
                                <td style="width: 60%; padding-left:3px;">
                                    <t t-if="doc.payment_term_id">
                                        <p><strong>Payment Terms:</strong> <span t-esc="doc.payment_term_id.name"/></p>
                                    </t>
                                    <t t-if="doc.note">
                                        <div style="font-size: 13px; margin-top: 10px; padding-left:3px;">
                                            <p><strong>Offer Terms and Conditions:</strong></p>
                                            <p t-field="doc.note"/>
                                        </div>
                                    </t>
                                </td>
                                <td style="width: 40%;">
                                    <table style="width:100%; border:1px solid #000; border-collapse:collapse;">
                                        <tr>
                                            <td>Subtotal</td>
                                            <td style="text-align:right;"><span t-field="doc.amount_untaxed"/> SAR</td>
                                        </tr>
                                        <tr>
                                            <td>Discount</td>
                                            <td style="text-align:right;"><t t-esc="doc.discount_amount or 0.0"/> SAR</td>
                                        </tr>
                                        <tr>
                                            <td>Freight</td>
                                            <td style="text-align:right;"><t t-esc="doc.freight_amount or 0.0"/> SAR</td>
                                        </tr>
                                        <tr>
                                            <td><strong>Gross Total</strong></td>
                                            <td style="text-align:right;">
                                                <t t-set="gross_total" t-value="doc.amount_untaxed - (doc.discount_amount or 0.0) + (doc.freight_amount or 0.0)"/>
                                                <t t-esc="gross_total"/> SAR
                                            </td>
                                        </tr>
                                        <tr>
                                            <td>VAT (15%)</td>
                                            <td style="text-align:right;">
                                                <t t-set="vat_amount" t-value="gross_total * 0.15"/>
                                                <t t-esc="vat_amount"/> SAR
                                            </td>
                                        </tr>
                                        <tr style="background-color:#D3D3D3;">
                                            <td><strong>Net Total</strong></td>
                                            <td style="text-align:right;"><strong><t t-esc="gross_total + vat_amount"/> SAR</strong></td>
                                        </tr>
                                    </table>
                                </td>
                            </tr>
                        </table>

                        <!-- ===== Footer ===== -->
                        <div style="margin-top: 20px; text-align:center;">
                            <img t-att-src="request.httprequest.host_url + 'custom_sa_quotation/static/src/img/footer_companies_names.png'" style="height: 200px; width:100%;"/>
                            <img t-att-src="request.httprequest.host_url + 'custom_sa_quotation/static/src/img/company_bank_details_last_footer.jpg'" style="height: 300px; width:100%; margin-top: 30px;"/>
                        </div>

                    </div>
                </t>
            </t>
        </xpath>
    </template>
</odoo>
