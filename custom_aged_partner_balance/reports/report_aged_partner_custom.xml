<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!-- Custom report template that replaces the standard one -->
    <template id="report_agedpartnerbalance_minimal"
              inherit_id="accounting_pdf_reports.report_agedpartnerbalance">

        <!-- Replace entire template structure -->
        <xpath expr="//t[@t-call='web.html_container']" position="replace">
            <t t-call="web.html_container">
                <t t-call="web.basic_layout">
                    <div class="page" style="padding: 0; margin: 0;">

                        <style>
                            /* Override page margins for tighter layout */
                            @page {
                                margin-top: 15mm;
                                margin-bottom: 15mm;
                                margin-left: 10mm;
                                margin-right: 10mm;
                            }

                            /* Remove default body margins */
                            body {
                                margin: 0 !important;
                                padding: 0 !important;
                            }

                            /* Hide scrollbar but keep functionality */
                            div[style*="overflow-x: auto"]::-webkit-scrollbar {
                                height: 0px !important;
                                background: transparent !important;
                            }

                            div[style*="overflow-x: auto"] {
                                scrollbar-width: none !important;
                                -ms-overflow-style: none !important;
                            }

                            /* Ensure table cells don't break */
                            .aged-balance-table td,
                            .aged-balance-table th {
                                white-space: nowrap;
                                overflow: hidden;
                                text-overflow: ellipsis;
                            }

                            /* Prevent page breaks in headers and key sections */
                            .header, .report-params {
                                page-break-inside: avoid !important;
                                page-break-after: avoid !important;
                            }

                            /* CRITICAL: Force table header to repeat on every page */
                            .aged-balance-table thead {
                                display: table-header-group !important;
                            }

                            .aged-balance-table tbody {
                                display: table-row-group !important;
                            }

                            /* Allow controlled row breaks - reduces empty space */
                            .aged-balance-table tbody tr {
                                page-break-inside: avoid !important;
                                page-break-after: auto;
                            }

                            /* Optimize page filling */
                            .aged-balance-table tbody {
                                orphans: 3;
                                widows: 3;
                            }

                            /* Keep account total row with header */
                            .aged-balance-table thead tr:last-child {
                                page-break-after: avoid !important;
                            }

                            /* Reduce overall spacing for better fit */
                            @media print {
                                body {
                                    margin: 0 !important;
                                }

                                .page {
                                    padding-top: 0px !important;
                                    padding-bottom: 0px !important;
                                }

                                /* Ensure proper table rendering */
                                table {
                                    border-collapse: collapse !important;
                                }

                                /* Tighter spacing for print */
                                .header {
                                    margin-bottom: 8px !important;
                                    padding: 8px 0 !important;
                                }

                                .report-params {
                                    margin-bottom: 5px !important;
                                }

                                /* Reduce row heights */
                                .aged-balance-table tbody tr td {
                                    padding: 2px 4px !important;
                                    line-height: 1.1 !important;
                                    font-size: 10px !important;
                                }

                                .aged-balance-table thead tr th {
                                    padding: 3px 4px !important;
                                    line-height: 1.2 !important;
                                    font-size: 10px !important;
                                }

                                /* Compact report title and params */
                                .row {
                                    margin-bottom: 3px !important;
                                }

                                h5 {
                                    margin-bottom: 3px !important;
                                    font-size: 14px !important;
                                }

                                /* Reduce parameter section text */
                                .report-params strong,
                                .report-params p {
                                    font-size: 10px !important;
                                }
                            }
                        </style>

                        <!-- Custom Header -->
                        <div class="header" style="border:2px solid white; border-radius: 6px; background: white; margin-bottom: 8px; padding: 8px 0;">
                            <table style="width: 100%; border-collapse: collapse; border:none; margin-bottom: 0px;">
                                <tr style="border:2px solid white;">
                                    <td style="width: 50%; padding: 5px 0px; text-align: left; vertical-align: middle; border: none;padding-bottom:0px;">
                                        <div style="color: #8B1538; font-size: 13px; font-weight: bold; text-transform: uppercase;">
                                            SAMEER SHARAF AL OTAIBI TRADING COMPANY
                                        </div>
                                    </td>
                                    <td style="width: 50%; padding: 5px 0px; text-align: right; vertical-align: middle; border: none;">
                                        <div style="color: #8B1538; font-size: 15px; font-weight: 900; direction: rtl;padding-bottom:0px;" class="ar">
                                            شركة سمير شرف العتيبي التجارية
                                        </div>
                                    </td>
                                </tr>
                            </table>

                            <table style="width: 100%; border-collapse: collapse;">
                                <tr style="border:2px solid white;">
                                    <td style="width: 33%; text-align: left; font-size: 12px; color: #333; vertical-align: middle;
                                    padding: 0px 0px 8px 0px; border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">
                                        <div style="line-height: 1.4; font-weight: 500; margin-top: 8px;">
                                            C.R. 4030216154<br/>
                                            VAT Regd: 311299944700003
                                        </div>
                                    </td>

                                    <td style="width: 34%; text-align: center; vertical-align: middle; padding: 3px 10px;
                                    border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">
                                        <img t-att-src="request.httprequest.host_url + 'custom_sa_quotation/static/src/img/faakart_logo.png'"
                                             style="max-height: 70px; max-width: 100%; object-fit: contain;"/>
                                    </td>

                                    <td style="width: 33%; text-align: right; font-size: 12px; color: #333; vertical-align: middle;
                                    direction: rtl; padding: 0px 0px 8px 0px; border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">
                                        <div style="line-height: 1.4; font-weight: 900; text-align: right; direction: rtl; margin-top: 8px;" class="ar">
                                            س.ت: ٤٠٣٠٢١٦١٥٤<br/>
                                            الرقم الضريبي: ٣١١٢٩٩٩٤٤٧٠٠٠٠٣
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>

                        <!-- Report Title - Dynamic based on type -->
                        <div class="row" style="margin-bottom: 5px; padding-bottom: 5px; border-bottom: 3px solid white; margin-top: 5px;">
                            <div class="col-8">
                                <h5 style="margin: 0; color: black; font-weight: bold;">
                                    <span t-if="data['result_selection'] == 'customer'">Aged Receivable Report</span>
                                    <span t-elif="data['result_selection'] == 'supplier'">Aged Payable Report</span>
                                    <span t-else="">Aged Partner Balance Report</span>
                                </h5>
                            </div>
                            <div class="col-4 text-end">
                                <p style="margin: 0;">
                                    <strong>Report Date:</strong><br/>
                                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                                </p>
                            </div>
                        </div>

                        <!-- Report Parameters -->
                        <div class="report-params">
                            <div class="row" style="margin-bottom: 5px;">
                                <div class="col-3">
                                    <strong>Company:</strong>
                                    <p t-esc="res_company.name" style="margin: 2px 0;"/>
                                </div>
                                <div class="col-3">
                                    <strong>Start Date:</strong>
                                    <p t-esc="data['date_from']" style="margin: 2px 0;"/>
                                </div>
                                <div class="col-3">
                                    <strong>Period Length (days):</strong>
                                    <p t-esc="data['period_length']" style="margin: 2px 0;"/>
                                </div>
                                <div class="col-3">
                                    <strong>Generated By:</strong>
                                    <p t-esc="user.name" style="margin: 2px 0;"/>
                                </div>
                            </div>

                            <div class="row" style="margin-bottom: 10px;">
                                <div class="col-3">
                                    <strong>
                                        <span t-if="data['result_selection'] == 'customer'">Customer's:</span>
                                        <span t-elif="data['result_selection'] == 'supplier'">Vendor's:</span>
                                        <span t-else="">Partner's:</span>
                                    </strong>
                                    <p style="margin: 3px 0;">
                                        <span t-if="data['result_selection'] == 'customer'">Receivable Accounts</span>
                                        <span t-if="data['result_selection'] == 'supplier'">Payable Accounts</span>
                                        <span t-if="data['result_selection'] == 'customer_supplier'">Receivable and Payable Accounts</span>
                                    </p>
                                </div>
                                <div class="col-3">
                                    <strong>Target Moves:</strong>
                                    <p style="margin: 3px 0;">
                                        <span t-if="data['target_move'] == 'all'">All Entries</span>
                                        <span t-if="data['target_move'] == 'posted'">All Posted Entries</span>
                                    </p>
                                </div>
                                <div class="col-3">
                                    <strong>
                                        <span t-if="data['result_selection'] == 'customer'">Total Customers:</span>
                                        <span t-elif="data['result_selection'] == 'supplier'">Total Vendors:</span>
                                        <span t-else="">Total Partners:</span>
                                    </strong>
                                    <p t-esc="total_partners or len(get_partner_lines)" style="margin: 3px 0;"/>
                                </div>
                                <div class="col-3">
                                    <strong>
                                        <span t-if="data['result_selection'] == 'customer'">Customers with Overdue:</span>
                                        <span t-elif="data['result_selection'] == 'supplier'">Vendors with Overdue:</span>
                                        <span t-else="">Partners with Overdue:</span>
                                    </strong>
                                    <p t-esc="partners_with_overdue or 0" style="margin: 3px 0;"/>
                                </div>
                            </div>
                        </div>

                        <!-- Main Table - Removed overflow-x wrapper for better print handling -->
                        <div style="margin-bottom: 10px;">
                            <table class="table table-sm table-bordered aged-balance-table"
                                   style="width: 100%; table-layout: fixed; border-collapse: collapse;">
                                <colgroup>
                                    <col style="width: 25%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.71%;"/>
                                    <col style="width: 10.74%;"/>
                                </colgroup>
                                <thead>
                                    <tr style="background-color: #A3AABE; color: black;">
                                        <th style="padding: 6px; text-align: left; border: 1px solid #ddd;">
                                            <span t-if="data['result_selection'] == 'customer'">Customer</span>
                                            <span t-elif="data['result_selection'] == 'supplier'">Vendor</span>
                                            <span t-else="">Partners</span>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">Not due</th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="data['4']['name']"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="data['3']['name']"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="data['2']['name']"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="data['1']['name']"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="data['0']['name']"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">Total</th>
                                    </tr>
                                    <!-- Account Total Row -->
                                    <tr t-if="get_partner_lines" style="background-color: #f0f0f0; font-weight: bold;">
                                        <th style="padding: 6px; text-align: left; border: 1px solid #ddd;">Account Total</th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[6]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[4]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[3]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[2]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[1]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[0]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                        <th style="padding: 6px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="get_direction[5]"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr t-foreach="get_partner_lines" t-as="partner">
                                        <td style="padding: 5px; text-align: left; border: 1px solid #ddd;">
                                            <span t-esc="partner['name']"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['direction']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['4']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['3']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['2']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['1']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; border: 1px solid #ddd;">
                                            <span t-esc="partner['0']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                        <td style="padding: 5px; text-align: right; font-weight: bold; border: 1px solid #ddd;">
                                            <span t-esc="partner['total']"
                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <!-- Aging Analysis Section -->
                        <div class="row" style="margin-top: 30px; page-break-inside: avoid;" t-if="percentage_breakdown">
                            <div class="col-12">
                                <h4 style="color:#808080; margin-bottom: 15px;">Aging Analysis Summary</h4>
                                <table class="table table-sm table-bordered">
                                    <thead style="background-color: #A3AABE; color: white;">
                                        <tr>
                                            <th style="padding: 8px;">Period</th>
                                            <th class="text-end" style="padding: 8px;">Amount</th>
                                            <th class="text-end" style="padding: 8px;">Percentage</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td style="padding: 6px;">Not Due</td>
                                            <td class="text-end" style="padding: 6px;">
                                                <span t-esc="get_direction[6]"
                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                            <td class="text-end" style="padding: 6px;">
                                                <span t-esc="'%.2f' % percentage_breakdown.get('not_due', 0)"/>%
                                            </td>
                                        </tr>
                                        <tr t-foreach="range(5)" t-as="period_idx">
                                            <td style="padding: 6px;">
                                                <span t-esc="data[str(4-period_idx)]['name']"/>
                                            </td>
                                            <td class="text-end" style="padding: 6px;">
                                                <span t-esc="get_direction[4-period_idx]"
                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                            <td class="text-end" style="padding: 6px;">
                                                <span t-esc="'%.2f' % percentage_breakdown.get('period_' + str(4-period_idx), 0)"/>%
                                            </td>
                                        </tr>
                                        <tr style="font-weight: bold; background-color: #f0f0f0;">
                                            <td style="padding: 6px;">Total</td>
                                            <td class="text-end" style="padding: 6px;">
                                                <span t-esc="get_direction[5]"
                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>
                                            </td>
                                            <td class="text-end" style="padding: 6px;">100.00%</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>

                        <!-- Custom Footer -->
                        <div class="row" style="margin-top: 30px; border-top: 2px solid #875A7B; padding-top: 15px; page-break-inside: avoid;">
                            <div class="col-6">
                                <small class="text-muted">
                                    <strong t-esc="res_company.name"/> |
                                    <span t-esc="res_company.phone or ''"/>
                                </small>
                            </div>
                            <div class="col-6 text-end">
                                <small class="text-muted">
                                    Generated by <span t-esc="user.name"/> on
                                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>
                                </small>
                            </div>
                        </div>

                    </div>
                </t>
            </t>
        </xpath>

    </template>

</odoo>



<!--<?xml version="1.0" encoding="utf-8"?>-->
<!--<odoo>-->

<!--    &lt;!&ndash; Custom report template that replaces the standard one &ndash;&gt;-->
<!--    <template id="report_agedpartnerbalance_minimal"-->
<!--              inherit_id="accounting_pdf_reports.report_agedpartnerbalance">-->

<!--        &lt;!&ndash; Replace entire template structure &ndash;&gt;-->
<!--        <xpath expr="//t[@t-call='web.html_container']" position="replace">-->
<!--            <t t-call="web.html_container">-->
<!--                <t t-call="web.basic_layout">-->
<!--                    <div class="page" style="padding-top: 20px;">-->

<!--                        <style>-->
<!--                            /* Hide scrollbar but keep functionality */-->
<!--                            div[style*="overflow-x: auto"]::-webkit-scrollbar {-->
<!--                                height: 0px !important;-->
<!--                                background: transparent !important;-->
<!--                            }-->

<!--                            div[style*="overflow-x: auto"] {-->
<!--                                scrollbar-width: none !important;-->
<!--                                -ms-overflow-style: none !important;-->
<!--                            }-->
<!--                        </style>-->

<!--                        &lt;!&ndash; Custom Header &ndash;&gt;-->
<!--                        <div class="header" style="border:2px solid white; border-radius: 6px; background: white; margin-bottom: 25px; padding: 15px 0;">-->
<!--                            <table style="width: 100%; border-collapse: collapse; border:none; margin-bottom: 0px;">-->
<!--                                <tr style="border:2px solid white;">-->
<!--                                    <td style="width: 50%; padding: 10px 0px; text-align: left; vertical-align: middle; border: none;padding-bottom:0px;">-->
<!--                                        <div style="color: #8B1538; font-size: 14px; font-weight: bold; text-transform: uppercase;">-->
<!--                                            SAMEER SHARAF AL OTAIBI TRADING COMPANY-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                    <td style="width: 50%; padding: 10px 0px; text-align: right; vertical-align: middle; border: none;">-->
<!--                                        <div style="color: #8B1538; font-size: 16px; font-weight: 900; direction: rtl;padding-bottom:0px;" class="ar">-->
<!--                                            شركة سمير شرف العتيبي التجارية-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </table>-->

<!--                            <table style="width: 100%; border-collapse: collapse;">-->
<!--                                <tr style="border:2px solid white;">-->
<!--                                    <td style="width: 33%; text-align: left; font-size: 14px; color: #333; vertical-align: middle;-->
<!--                                    padding: 0px 0px 10px 0px; border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">-->
<!--                                        <div style="line-height: 1.6; font-weight: 500; margin-top: 10px;">-->
<!--                                            C.R. 4030216154<br/>-->
<!--                                            VAT Regd: 311299944700003-->
<!--                                        </div>-->
<!--                                    </td>-->

<!--                                    <td style="width: 34%; text-align: center; vertical-align: middle; padding: 5px 10px;-->
<!--                                    border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">-->
<!--                                        <img t-att-src="request.httprequest.host_url + 'custom_sa_quotation/static/src/img/faakart_logo.png'"-->
<!--                                             style="max-height: 90px; max-width: 100%; object-fit: contain;"/>-->
<!--                                    </td>-->

<!--                                    <td style="width: 33%; text-align: right; font-size: 14px; color: #333; vertical-align: middle;-->
<!--                                    direction: rtl; padding: 0px 0px 10px 0px; border-top: 1px solid #ddd; border-bottom: 2px solid #8B1538;">-->
<!--                                        <div style="line-height: 1.6; font-weight: 900; text-align: right; direction: rtl; margin-top: 10px;" class="ar">-->
<!--                                            س.ت: ٤٠٣٠٢١٦١٥٤<br/>-->
<!--                                            الرقم الضريبي: ٣١١٢٩٩٩٤٤٧٠٠٠٠٣-->
<!--                                        </div>-->
<!--                                    </td>-->
<!--                                </tr>-->
<!--                            </table>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Report Title - Dynamic based on type &ndash;&gt;-->
<!--                        <div class="row" style="margin-bottom: 10px; padding-bottom: 10px; border-bottom: 3px solid white; margin-top: 5px;">-->
<!--                            <div class="col-8">-->
<!--                                <h5 style="margin: 0; color: black; font-weight: bold;">-->
<!--                                    <span t-if="data['result_selection'] == 'customer'">Aged Receivable Report</span>-->
<!--                                    <span t-elif="data['result_selection'] == 'supplier'">Aged Payable Report</span>-->
<!--                                    <span t-else="">Aged Partner Balance Report</span>-->
<!--                                </h5>-->
<!--                            </div>-->
<!--                            <div class="col-4 text-end">-->
<!--                                <p style="margin: 0;">-->
<!--                                    <strong>Report Date:</strong><br/>-->
<!--                                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>-->
<!--                                </p>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Report Parameters &ndash;&gt;-->
<!--                        <div class="row" style="margin-bottom: 10px;">-->
<!--                            <div class="col-3">-->
<!--                                <strong>Company:</strong>-->
<!--                                <p t-esc="res_company.name" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                <strong>Start Date:</strong>-->
<!--                                <p t-esc="data['date_from']" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                <strong>Period Length (days):</strong>-->
<!--                                <p t-esc="data['period_length']" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                <strong>Generated By:</strong>-->
<!--                                <p t-esc="user.name" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        <div class="row" style="margin-bottom: 20px;">-->
<!--                            <div class="col-3">-->
<!--                                &lt;!&ndash; Dynamic label based on report type &ndash;&gt;-->
<!--                                <strong>-->
<!--                                    <span t-if="data['result_selection'] == 'customer'">Customer's:</span>-->
<!--                                    <span t-elif="data['result_selection'] == 'supplier'">Vendor's:</span>-->
<!--                                    <span t-else="">Partner's:</span>-->
<!--                                </strong>-->
<!--                                <p style="margin: 5px 0;">-->
<!--                                    <span t-if="data['result_selection'] == 'customer'">Receivable Accounts</span>-->
<!--                                    <span t-if="data['result_selection'] == 'supplier'">Payable Accounts</span>-->
<!--                                    <span t-if="data['result_selection'] == 'customer_supplier'">Receivable and Payable Accounts</span>-->
<!--                                </p>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                <strong>Target Moves:</strong>-->
<!--                                <p style="margin: 5px 0;">-->
<!--                                    <span t-if="data['target_move'] == 'all'">All Entries</span>-->
<!--                                    <span t-if="data['target_move'] == 'posted'">All Posted Entries</span>-->
<!--                                </p>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                &lt;!&ndash; Dynamic label for total count &ndash;&gt;-->
<!--                                <strong>-->
<!--                                    <span t-if="data['result_selection'] == 'customer'">Total Customers:</span>-->
<!--                                    <span t-elif="data['result_selection'] == 'supplier'">Total Vendors:</span>-->
<!--                                    <span t-else="">Total Partners:</span>-->
<!--                                </strong>-->
<!--                                <p t-esc="total_partners or len(get_partner_lines)" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                            <div class="col-3">-->
<!--                                &lt;!&ndash; Dynamic label for overdue &ndash;&gt;-->
<!--                                <strong>-->
<!--                                    <span t-if="data['result_selection'] == 'customer'">Customers with Overdue:</span>-->
<!--                                    <span t-elif="data['result_selection'] == 'supplier'">Vendors with Overdue:</span>-->
<!--                                    <span t-else="">Partners with Overdue:</span>-->
<!--                                </strong>-->
<!--                                <p t-esc="partners_with_overdue or 0" style="margin: 5px 0;"/>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Main Table with Fixed Layout &ndash;&gt;-->
<!--                        <div style="overflow-x: auto; overflow-y: hidden;">-->
<!--                            <table class="table table-sm table-bordered" style="margin-bottom: 25px; width: 100%; table-layout: fixed;">-->
<!--                                <colgroup>-->
<!--                                    <col style="width: 20%;"/>  &lt;!&ndash; Partner Name &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Not Due &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Period 4 &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Period 3 &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Period 2 &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Period 1 &ndash;&gt;-->
<!--                                    <col style="width: 11.43%;"/>  &lt;!&ndash; Period 0 &ndash;&gt;-->
<!--                                    <col style="width: 11.42%;"/>  &lt;!&ndash; Total &ndash;&gt;-->
<!--                                </colgroup>-->
<!--                                <thead style="background-color: #A3AABE; color: black;">-->
<!--                                    <tr>-->
<!--                                        &lt;!&ndash; Dynamic column header based on report type &ndash;&gt;-->
<!--                                        <th style="padding: 8px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-->
<!--                                            <span t-if="data['result_selection'] == 'customer'">Customer</span>-->
<!--                                            <span t-elif="data['result_selection'] == 'supplier'">Vendor</span>-->
<!--                                            <span t-else="">Partners</span>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">Not due</th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">-->
<!--                                            <span t-esc="data['4']['name']"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">-->
<!--                                            <span t-esc="data['3']['name']"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">-->
<!--                                            <span t-esc="data['2']['name']"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">-->
<!--                                            <span t-esc="data['1']['name']"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">-->
<!--                                            <span t-esc="data['0']['name']"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px; white-space: nowrap;">Total</th>-->
<!--                                    </tr>-->
<!--                                    &lt;!&ndash; Account Total Row &ndash;&gt;-->
<!--                                    <tr t-if="get_partner_lines" style="background-color: #f0f0f0; font-weight: bold;">-->
<!--                                        <th style="padding: 8px;">Account Total</th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[6]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[4]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[3]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[2]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[1]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[0]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                        <th class="text-end" style="padding: 8px;">-->
<!--                                            <span t-esc="get_direction[5]"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </th>-->
<!--                                    </tr>-->
<!--                                </thead>-->
<!--                                <tbody>-->
<!--                                    <tr t-foreach="get_partner_lines" t-as="partner">-->
<!--                                        <td style="padding: 6px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">-->
<!--                                            <span t-esc="partner['name']"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['direction']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['4']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['3']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['2']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['1']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['0']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                        <td class="text-end" style="padding: 6px; font-weight: bold; white-space: nowrap;">-->
<!--                                            <span t-esc="partner['total']"-->
<!--                                                  t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                        </td>-->
<!--                                    </tr>-->
<!--                                </tbody>-->
<!--                            </table>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Aging Analysis Section &ndash;&gt;-->
<!--                        <div class="row" style="margin-top: 30px;" t-if="percentage_breakdown">-->
<!--                            <div class="col-12">-->
<!--                                <h4 style="color:#808080; margin-bottom: 15px;">Aging Analysis Summary</h4>-->
<!--                                <table class="table table-sm table-bordered">-->
<!--                                    <thead style="background-color: #A3AABE; color: white;">-->
<!--                                        <tr>-->
<!--                                            <th style="padding: 8px;">Period</th>-->
<!--                                            <th class="text-end" style="padding: 8px;">Amount</th>-->
<!--                                            <th class="text-end" style="padding: 8px;">Percentage</th>-->
<!--                                        </tr>-->
<!--                                    </thead>-->
<!--                                    <tbody>-->
<!--                                        <tr>-->
<!--                                            <td style="padding: 6px;">Not Due</td>-->
<!--                                            <td class="text-end" style="padding: 6px;">-->
<!--                                                <span t-esc="get_direction[6]"-->
<!--                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                            </td>-->
<!--                                            <td class="text-end" style="padding: 6px;">-->
<!--                                                <span t-esc="'%.2f' % percentage_breakdown.get('not_due', 0)"/>%-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                        <tr t-foreach="range(5)" t-as="period_idx">-->
<!--                                            <td style="padding: 6px;">-->
<!--                                                <span t-esc="data[str(4-period_idx)]['name']"/>-->
<!--                                            </td>-->
<!--                                            <td class="text-end" style="padding: 6px;">-->
<!--                                                <span t-esc="get_direction[4-period_idx]"-->
<!--                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                            </td>-->
<!--                                            <td class="text-end" style="padding: 6px;">-->
<!--                                                <span t-esc="'%.2f' % percentage_breakdown.get('period_' + str(4-period_idx), 0)"/>%-->
<!--                                            </td>-->
<!--                                        </tr>-->
<!--                                        <tr style="font-weight: bold; background-color: #f0f0f0;">-->
<!--                                            <td style="padding: 6px;">Total</td>-->
<!--                                            <td class="text-end" style="padding: 6px;">-->
<!--                                                <span t-esc="get_direction[5]"-->
<!--                                                      t-options="{'widget': 'monetary', 'display_currency': res_company.currency_id}"/>-->
<!--                                            </td>-->
<!--                                            <td class="text-end" style="padding: 6px;">100.00%</td>-->
<!--                                        </tr>-->
<!--                                    </tbody>-->
<!--                                </table>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                        &lt;!&ndash; Custom Footer &ndash;&gt;-->
<!--                        <div class="row" style="margin-top: 30px; border-top: 2px solid #875A7B; padding-top: 15px;">-->
<!--                            <div class="col-6">-->
<!--                                <small class="text-muted">-->
<!--                                    <strong t-esc="res_company.name"/> |-->
<!--                                    <span t-esc="res_company.phone or ''"/>-->
<!--                                </small>-->
<!--                            </div>-->
<!--                            <div class="col-6 text-end">-->
<!--                                <small class="text-muted">-->
<!--                                    Generated by <span t-esc="user.name"/> on-->
<!--                                    <span t-esc="context_timestamp(datetime.datetime.now()).strftime('%Y-%m-%d %H:%M')"/>-->
<!--                                </small>-->
<!--                            </div>-->
<!--                        </div>-->

<!--                    </div>-->
<!--                </t>-->
<!--            </t>-->
<!--        </xpath>-->

<!--    </template>-->

<!--</odoo>-->



