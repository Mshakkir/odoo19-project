<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <record id="view_journal_audit_line_tree" model="ir.ui.view">
        <field name="name">journal.audit.line.list</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <list string="Journal Audit Details"
                  create="false"
                  edit="false"
                  delete="false"
                  decoration-muted="parent_state == 'draft'">

                <!-- Move Information -->
                <field name="move_id" string="Journal Entry"/>
                <field name="date"/>
                <field name="journal_id"/>

                <!-- Account Information -->
                <field name="account_id"/>
                <field name="partner_id"/>

                <!-- Entry Details -->
                <field name="name" string="Label"/>
                <field name="ref" string="Reference" optional="hide"/>

                <!-- Amounts -->
                <field name="debit" sum="Total Debit"/>
                <field name="credit" sum="Total Credit"/>
                <field name="balance" sum="Total Balance" optional="hide"/>

                <!-- Currency (for multi-currency) -->
                <field name="currency_id" optional="hide" groups="base.group_multi_currency"/>
                <field name="amount_currency" optional="hide" groups="base.group_multi_currency"/>

                <!-- Analytic (if available) -->
                <field name="analytic_distribution"
                       widget="analytic_distribution"
                       optional="hide"
                       groups="analytic.group_analytic_accounting"/>

                <!-- State -->
                <field name="parent_state" string="Status" optional="hide"/>

                <!-- Company (for multi-company) -->
                <field name="company_id" groups="base.group_multi_company" optional="hide"/>

            </list>
        </field>
    </record>

    <!-- Add search view for better filtering -->
    <record id="view_journal_audit_line_search" model="ir.ui.view">
        <field name="name">journal.audit.line.search</field>
        <field name="model">account.move.line</field>
        <field name="arch" type="xml">
            <search string="Search Journal Entries">
                <!-- Search fields -->
                <field name="move_id" string="Journal Entry"/>
                <field name="date"/>
                <field name="journal_id"/>
                <field name="account_id"/>
                <field name="partner_id"/>
                <field name="name" string="Label"/>

                <!-- Filters -->
                <filter string="Draft" name="draft" domain="[('parent_state', '=', 'draft')]"/>
                <filter string="Posted" name="posted" domain="[('parent_state', '=', 'posted')]"/>

                <separator/>
                <filter string="Debit" name="debit" domain="[('debit', '>', 0)]"/>
                <filter string="Credit" name="credit" domain="[('credit', '>', 0)]"/>

                <!-- Group By -->
                <group expand="0" string="Group By">
                    <filter string="Journal" name="group_by_journal"
                            context="{'group_by': 'journal_id'}"/>
                    <filter string="Account" name="group_by_account"
                            context="{'group_by': 'account_id'}"/>
                    <filter string="Partner" name="group_by_partner"
                            context="{'group_by': 'partner_id'}"/>
                    <filter string="Date" name="group_by_date"
                            context="{'group_by': 'date'}"/>
                    <filter string="Journal Entry" name="group_by_move"
                            context="{'group_by': 'move_id'}"/>
                </group>

                <!-- Sorting options -->
                <group expand="0" string="Sort By">
                    <filter string="Date" name="sort_date"
                            context="{'orderby': 'date desc, move_id desc'}"/>
                    <filter string="Journal Entry" name="sort_move"
                            context="{'orderby': 'move_id desc, date desc'}"/>
                </group>
            </search>
        </field>
    </record>

</odoo>