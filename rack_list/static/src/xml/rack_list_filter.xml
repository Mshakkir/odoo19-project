<?xml version="1.0" encoding="utf-8"?>
<templates xml:space="preserve">

    <!-- ── Filter Bar Component ───────────────────────────────────────────── -->
    <t t-name="rack_list.FilterBar">
        <div class="rack_list_filter_bar">
            <input
                type="text"
                class="rack_filter_input o_input"
                placeholder="Product name or code"
                t-att-value="state.productFilter"
                t-on-input="onProductInput"
            />
            <select class="rack_filter_select o_input" t-on-change="onLocationChange">
                <option value="">Location</option>
                <t t-foreach="state.locations" t-as="loc" t-key="loc.id">
                    <option
                        t-att-value="loc.id"
                        t-att-selected="String(state.locationId) === String(loc.id)"
                    >
                        <t t-esc="loc.name"/>
                    </option>
                </t>
            </select>
            <button class="btn btn-primary" t-on-click="onApply">Apply</button>
            <button class="btn btn-secondary" t-on-click="onClear">Clear</button>
        </div>
    </t>

    <!--
        ── Rack List Controller Template ─────────────────────────────────────

        t-inherit-mode="primary" creates a STANDALONE copy of the parent
        template — it does NOT modify the original.

        The parent template "web.ListView" is the correct name used by
        Odoo 17/18/19 for the ListController template, as confirmed by
        Odoo's own documentation example:
          t-name="my_module.CustomKanbanView" t-inherit="web.KanbanView"
        The equivalent for list is "web.ListView".

        We insert RackListFilterBar BEFORE the <Layout> component,
        which places it between the control panel and the list table.
    -->
    <t t-name="rack_list.ListController"
       t-inherit="web.ListView"
       t-inherit-mode="primary">
        <xpath expr="//Layout" position="before">
            <RackListFilterBar
                applyFilters.bind="applyRackFilters"
                clearFilters.bind="clearRackFilters"
            />
        </xpath>
    </t>

</templates>