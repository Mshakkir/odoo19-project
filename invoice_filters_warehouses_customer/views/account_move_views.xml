<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- ============================================== -->
        <!-- Invoice List View: Add Warehouse Column       -->
        <!-- Odoo 19 SAFE (list/tree compatible)           -->
        <!-- ============================================== -->
        <record id="view_invoice_tree_inherit_warehouse_filter" model="ir.ui.view">
            <field name="name">account.move.list.inherit.warehouse.filter</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_invoice_tree"/>
            <field name="arch" type="xml">

                <xpath expr="//list | //tree" position="inside">
                    <field name="warehouse_id"
                           string="Warehouse"
                           optional="show"/>
                </xpath>

            </field>
        </record>

        <!-- ============================================== -->
        <!-- Search / Filter View                          -->
        <!-- Odoo 19 STRICT STRUCTURE                      -->
        <!-- ============================================== -->
        <record id="view_account_invoice_filter_inherit_custom" model="ir.ui.view">
            <field name="name">account.move.filter.inherit.warehouse.customer</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_account_invoice_filter"/>
            <field name="arch" type="xml">

                <xpath expr="//search" position="inside">

                    <!-- Warehouse search field -->
                    <field name="warehouse_id" string="Warehouse"/>

                    <!-- Group By -->
                    <separator/>
                    <filter string="Group by Warehouse"
                            name="group_by_warehouse"
                            context="{'group_by': 'warehouse_id'}"/>

                    <!-- Warehouse Filters -->
                    <separator/>
                    <group expand="1" string="Filter by Warehouse">
                        <filter string="Dammam"
                                domain="[('warehouse_id.name', 'ilike', 'Dammam')]"/>
                        <filter string="Main"
                                domain="[('warehouse_id.name', 'ilike', 'MAIN')]"/>
                        <filter string="S00014"
                                domain="[('warehouse_id.name', 'ilike', 'S00014')]"/>
                        <filter string="S00017"
                                domain="[('warehouse_id.name', 'ilike', 'S00017')]"/>
                        <filter string="S00019"
                                domain="[('warehouse_id.name', 'ilike', 'S00019')]"/>
                        <filter string="S00020"
                                domain="[('warehouse_id.name', 'ilike', 'S00020')]"/>
                        <filter string="S00021"
                                domain="[('warehouse_id.name', 'ilike', 'S00021')]"/>
                        <filter string="S00022"
                                domain="[('warehouse_id.name', 'ilike', 'S00022')]"/>
                        <separator/>
                        <filter string="Has Warehouse"
                                domain="[('warehouse_id', '!=', False)]"/>
                        <filter string="No Warehouse"
                                domain="[('warehouse_id', '=', False)]"/>
                    </group>

                    <!-- Customer Filters -->
                    <separator/>
                    <group expand="1" string="Filter by Customer">
                        <filter string="Customer 1"
                                domain="[('partner_id.name', 'ilike', 'customer 1')]"/>
                        <filter string="Customer 2"
                                domain="[('partner_id.name', 'ilike', 'customer 2')]"/>
                        <filter string="Customer 3"
                                domain="[('partner_id.name', 'ilike', 'customer 3')]"/>
                        <filter string="Customer 4"
                                domain="[('partner_id.name', 'ilike', 'customer 4')]"/>
                        <filter string="Test Customer"
                                domain="[('partner_id.name', 'ilike', 'Test Custo')]"/>
                        <filter string="Administrator"
                                domain="[('partner_id.name', 'ilike', 'Administra')]"/>
                        <filter string="New Customer"
                                domain="[('partner_id.name', 'ilike', 'new_custo')]"/>
                    </group>

                </xpath>

            </field>
        </record>

        <!-- ============================================== -->
        <!-- Invoice Form View                             -->
        <!-- ============================================== -->
        <record id="view_move_form_inherit_warehouse_filter" model="ir.ui.view">
            <field name="name">account.move.form.inherit.warehouse.filter</field>
            <field name="model">account.move</field>
            <field name="inherit_id" ref="account.view_move_form"/>
            <field name="arch" type="xml">

                <xpath expr="//field[@name='invoice_date']" position="after">
                    <field name="warehouse_id"
                           options="{'no_create': True, 'no_open': True}"
                           invisible="move_type not in ['out_invoice', 'out_refund']"/>
                </xpath>

            </field>
        </record>

    </data>
</odoo>
