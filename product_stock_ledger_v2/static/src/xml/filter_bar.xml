<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">

    <!-- ── Filter Bar Component Template ─────────────────────────── -->
    <t t-name="product_stock_ledger.FilterBar">
        <div class="o_sl_filter_bar">
            <div class="slf-wrap">

                <!-- Product with autocomplete -->
                <div class="slf-field slf-prod-field">
                    <input
                        type="text"
                        class="slf-input"
                        placeholder="Product name or code"
                        autocomplete="off"
                        t-att-value="state.product"
                        t-on-input="onProductInput"
                        t-on-blur="hideAc"
                    />
                    <div class="slf-autocomplete" t-att-style="state.acVisible ? 'display:block' : 'display:none'">
                        <t t-foreach="state.acResults" t-as="p" t-key="p.id">
                            <div class="slf-ac-item" t-on-mousedown="() => selectProduct(p)">
                                <t t-if="p.default_code">
                                    <span class="slf-badge" t-esc="'[' + p.default_code + ']'"/>
                                </t>
                                <span t-esc="p.display_name"/>
                            </div>
                        </t>
                    </div>
                </div>

                <!-- Warehouse -->
                <div class="slf-field">
                    <select class="slf-input" t-model="state.warehouseId">
                        <option value="">Warehouse</option>
                        <t t-foreach="state.warehouses" t-as="wh" t-key="wh.id">
                            <option t-att-value="wh.id" t-esc="wh.name"/>
                        </t>
                    </select>
                </div>

                <!-- Date range -->
                <div class="slf-date-group">
                    <input type="date" class="slf-input slf-date" t-model="state.dateFrom"/>
                    <span class="slf-arrow">→</span>
                    <input type="date" class="slf-input slf-date" t-model="state.dateTo"/>
                </div>

                <!-- Voucher -->
                <div class="slf-field">
                    <input type="text" class="slf-input" placeholder="Voucher" t-model="state.voucher"/>
                </div>

                <!-- Type -->
                <div class="slf-field slf-sm-field">
                    <select class="slf-input" t-model="state.moveType">
                        <option value="">Type</option>
                        <option value="IN">IN</option>
                        <option value="OUT">OUT</option>
                        <option value="INT">INT</option>
                    </select>
                </div>

                <!-- Invoice Status -->
                <div class="slf-field slf-md-field">
                    <select class="slf-input" t-model="state.invoiceStatus">
                        <option value="">Invoice Status</option>
                        <option value="invoiced">Invoiced</option>
                        <option value="to invoice">To Invoice</option>
                        <option value="nothing">Nothing</option>
                    </select>
                </div>

                <!-- Buttons -->
                <div class="slf-actions">
                    <button class="slf-btn slf-btn-apply" t-on-click="apply">
                        Apply <kbd>↵</kbd>
                    </button>
                    <button class="slf-btn slf-btn-clear" t-on-click="clear">
                        Clear <kbd>Esc</kbd>
                    </button>
                </div>

            </div>
        </div>
    </t>

    <!-- ── Inject into ListRenderer ──────────────────────────────── -->
    <t t-name="web.ListRenderer" t-inherit="web.ListRenderer" t-inherit-mode="extension">
        <xpath expr="//div[hasclass('o_list_renderer')]" position="before">
            <t t-if="props.list and props.list.model and props.list.model.config and props.list.model.config.resModel === 'product.stock.ledger'">
                <StockLedgerFilterBar model="props.list.model"/>
            </t>
        </xpath>
    </t>

</templates>
