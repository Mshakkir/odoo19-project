<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Confirmed Purchase Orders List View -->
        <record id="purchase_order_view_tree_inherit_custom" model="ir.ui.view">
            <field name="name">purchase.order.view.tree.inherit.custom</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
            <field name="priority">1</field>
            <field name="arch" type="xml">

                <!-- Replace the list structure (NOT tree - Odoo 19 uses <list>) -->
                <xpath expr="//list" position="replace">
                    <list string="Purchase Orders"
                          sample="1"
                          multi_edit="1"
                          default_order="date_approve desc">

                        <!-- Confirmation Date FIRST -->
                        <field name="date_approve"
                               string="Confirmation Date"
                               optional="show"
                               readonly="1"
                               width="130px"/>

                        <field name="name"
                               string="Reference"
                               readonly="1"
                               width="130px"/>

                        <field name="partner_id"
                               string="Vendor"
                               readonly="state in ['cancel', 'purchase']"
                               width="150px"/>

                        <field name="partner_ref"
                               string="Vendor Reference"
                               optional="show"
                               width="130px"/>

                        <field name="picking_type_id"
                               string="Warehouse"
                               optional="show"
                               width="135px"/>

                        <field name="awb_number"
                               string="Shipping Ref #"
                               optional="show"
                               readonly="state in ('cancel', 'purchase')"
                               width="110px"/>

                        <field name="amount_untaxed"
                               string="Untaxed Amount"
                               widget="monetary"
                               sum="Total Untaxed"
                               optional="show"
                               width="120px"/>

                        <field name="amount_tax"
                               string="Tax Amount"
                               widget="monetary"
                               sum="Total Tax"
                               optional="show"
                               width="100px"/>

                        <field name="amount_total"
                               string="Total Amount"
                               widget="monetary"
                               sum="Total"
                               optional="show"
                               width="120px"/>

                        <field name="user_id"
                               string="Buyer"
                               widget="many2one_avatar_user"
                               optional="show"
                               width="130px"/>

                        <field name="state" column_invisible="True"/>

                        <field name="invoice_status"
                               string="Billing Status"
                               widget="badge"
                               decoration-success="invoice_status == 'invoiced'"
                               decoration-info="invoice_status == 'to invoice'"
                               optional="show"
                               width="110px"/>

                        <field name="priority" widget="priority" optional="hide" width="60px"/>
                        <field name="company_id" column_invisible="True"/>
                        <field name="activity_ids" widget="list_activity" optional="hide" width="100px"/>
                        <field name="origin" optional="hide" width="130px"/>
                        <field name="currency_id" column_invisible="True"/>
                        <field name="date_planned" optional="hide" width="130px"/>
                        <field name="date_order" optional="hide" width="110px"/>

                    </list>
                </xpath>

            </field>
        </record>

    </data>
</odoo>
