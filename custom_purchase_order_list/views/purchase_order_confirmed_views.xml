<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <!-- Inherit and customize the Purchase Order List View -->
        <record id="purchase_order_view_tree_inherit_custom" model="ir.ui.view">
            <field name="name">purchase.order.view.tree.inherit.custom</field>
            <field name="model">purchase.order</field>
            <field name="inherit_id" ref="purchase.purchase_order_view_tree"/>
            <field name="arch" type="xml">

                <!-- Remove all existing fields first -->
                <xpath expr="//field[@name='priority']" position="replace"/>
                <xpath expr="//field[@name='partner_ref']" position="replace"/>
                <xpath expr="//field[@name='name']" position="replace"/>
                <xpath expr="//field[@name='date_approve']" position="replace"/>
                <xpath expr="//field[@name='partner_id']" position="replace"/>
                <xpath expr="//field[@name='company_id']" position="replace"/>
                <xpath expr="//field[@name='user_id']" position="replace"/>
                <xpath expr="//field[@name='date_order']" position="replace"/>
                <xpath expr="//field[@name='activity_ids']" position="replace"/>
                <xpath expr="//field[@name='origin']" position="replace"/>
                <xpath expr="//field[@name='amount_untaxed']" position="replace"/>
                <xpath expr="//field[@name='amount_total']" position="replace"/>
                <xpath expr="//field[@name='currency_id']" position="replace"/>
                <xpath expr="//field[@name='state']" position="replace"/>
                <xpath expr="//field[@name='amount_total_cc']" position="replace"/>
                <xpath expr="//field[@name='company_currency_id']" position="replace"/>
                <xpath expr="//field[@name='invoice_status']" position="replace"/>
                <xpath expr="//field[@name='date_planned']" position="replace"/>

                <!-- Add fields in YOUR EXACT ORDER -->
                <xpath expr="//list" position="inside">
                    <!-- 1. Order Date - NOW VISIBLE -->
                    <field name="date_order" string="Order Date"
                           readonly="state in ['cancel', 'purchase']"
                           optional="show"/>

                    <!-- 2. Reference -->
                    <field name="name" string="Reference"
                           readonly="1"
                           decoration-bf="1"
                           decoration-info="state in ('draft','sent')"/>

                    <!-- 3. Vendor -->
                    <field name="partner_id" string="Vendor"
                           readonly="state in ['cancel', 'purchase']"/>

                    <!-- 4. Vendor Reference -->
                    <field name="partner_ref" string="Vendor Reference" optional="show"/>

                    <!-- 5. Warehouse -->
                    <field name="picking_type_id" string="Warehouse" optional="show"/>

                    <!-- 6. AWB Number (Shipping Reference) - ADDED -->
                    <field name="awb_number" string="Shipping Ref #" optional="show" readonly="state in ('cancel', 'purchase')"/>

                    <!-- 7. Untaxed Amount -->
                    <field name="amount_untaxed" string="Untaxed Amount"
                           sum="Total Untaxed amount"
                           widget="monetary"
                           optional="show"/>

                    <!-- 8. Tax Amount -->
                    <field name="amount_tax" string="Tax Amount"
                           sum="Total Tax"
                           widget="monetary"
                           optional="show"/>

                    <!-- 9. Total Amount -->
                    <field name="amount_total" string="Total Amount"
                           sum="Total amount"
                           widget="monetary"
                           optional="show"
                           decoration-bf="1"/>

                    <!-- 10. Buyer -->
                    <field name="user_id" string="Buyer"
                           widget="many2one_avatar_user"
                           optional="show"/>

                    <!-- 11. Status (Hidden but used for decorations) -->
                    <field name="state" column_invisible="True"/>

                    <!-- 12. Billing Status -->
                    <field name="invoice_status" string="Billing Status"
                           widget="badge"
                           decoration-success="invoice_status == 'invoiced'"
                           decoration-info="invoice_status == 'to invoice'"
                           optional="show"/>

                    <!-- Additional Fields (Hidden) -->
                    <field name="priority" optional="hide" widget="priority" nolabel="1"/>
                    <field name="date_approve" column_invisible="context.get('quotation_only', False)" optional="hide"/>
                    <field name="company_id" groups="base.group_multi_company"
                           options="{'no_create': True}"
                           optional="hide"
                           readonly="state in ['cancel', 'purchase']"/>
                    <field name="company_id" groups="!base.group_multi_company"
                           column_invisible="True"
                           readonly="state in ['cancel', 'purchase']"/>
                    <field name="activity_ids" widget="list_activity" optional="hide"/>
                    <field name="origin" optional="hide"/>
                    <field name="currency_id" column_invisible="True" readonly="state in ['cancel', 'purchase']"/>
                    <field name="date_planned" column_invisible="context.get('quotation_only', False)" optional="hide"/>
                </xpath>

            </field>
        </record>

    </data>
</odoo>