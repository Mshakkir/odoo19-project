<?xml version="1.0" encoding="UTF-8"?>
<templates xml:space="preserve">
    <!-- Extend List Controller Template -->
    <t t-name="product_stock_ledger.ListController" t-inherit="web.ListController" t-inherit-mode="extension">
        <!-- Add Filter Row Above List -->
        <xpath expr="//div[hasclass('o_list_view')]" position="before">
            <div class="stock_ledger_filters bg-light p-3 mb-2 border rounded">
                <div class="row g-2">
                    <!-- Product Filter -->
                    <div class="col-md-3">
                        <label class="form-label small fw-bold">Product</label>
                        <input type="text"
                               class="form-control form-control-sm"
                               placeholder="Filter by product..."
                               t-model="state.filters.product_id"
                               t-on-input="(ev) => this.onFilterChange('product_id', ev)"/>
                    </div>

                    <!-- Warehouse Filter -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Warehouse</label>
                        <input type="text"
                               class="form-control form-control-sm"
                               placeholder="Filter warehouse..."
                               t-model="state.filters.warehouse_id"
                               t-on-input="(ev) => this.onFilterChange('warehouse_id', ev)"/>
                    </div>

                    <!-- Voucher Filter -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Voucher</label>
                        <input type="text"
                               class="form-control form-control-sm"
                               placeholder="Filter voucher..."
                               t-model="state.filters.voucher"
                               t-on-input="(ev) => this.onFilterChange('voucher', ev)"/>
                    </div>

                    <!-- Type Filter -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Type</label>
                        <select class="form-select form-select-sm"
                                t-model="state.filters.type"
                                t-on-change="(ev) => this.onFilterChange('type', ev)">
                            <option value="">All Types</option>
                            <option value="Receipts">Receipts</option>
                            <option value="Delivery">Delivery</option>
                            <option value="Internal Transfer">Internal Transfer</option>
                        </select>
                    </div>

                    <!-- Invoice Status Filter -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Invoice Status</label>
                        <select class="form-select form-select-sm"
                                t-model="state.filters.invoice_status"
                                t-on-change="(ev) => this.onFilterChange('invoice_status', ev)">
                            <option value="">All Status</option>
                            <option value="Invoiced">Invoiced</option>
                            <option value="Not Invoiced">Not Invoiced</option>
                            <option value="To Invoice">To Invoice</option>
                            <option value="Internal">Internal</option>
                        </select>
                    </div>

                    <!-- Clear Button -->
                    <div class="col-md-1 d-flex align-items-end">
                        <button class="btn btn-sm btn-outline-secondary w-100"
                                t-on-click="() => this.clearFilters()">
                            Clear
                        </button>
                    </div>
                </div>

                <!-- Second Row: Date Filters -->
                <div class="row g-2 mt-2">
                    <!-- Date From -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Date From</label>
                        <input type="date"
                               class="form-control form-control-sm"
                               t-model="state.filters.date_from"
                               t-on-change="(ev) => this.onFilterChange('date_from', ev)"/>
                    </div>

                    <!-- Date To -->
                    <div class="col-md-2">
                        <label class="form-label small fw-bold">Date To</label>
                        <input type="date"
                               class="form-control form-control-sm"
                               t-model="state.filters.date_to"
                               t-on-change="(ev) => this.onFilterChange('date_to', ev)"/>
                    </div>

                    <!-- Particulars Filter -->
                    <div class="col-md-4">
                        <label class="form-label small fw-bold">Particulars</label>
                        <input type="text"
                               class="form-control form-control-sm"
                               placeholder="Filter by particulars..."
                               t-model="state.filters.particulars"
                               t-on-input="(ev) => this.onFilterChange('particulars', ev)"/>
                    </div>

                    <!-- Info Text -->
                    <div class="col-md-4 d-flex align-items-end">
                        <small class="text-muted">
                            <i class="fa fa-info-circle"></i> Filters apply automatically as you type
                        </small>
                    </div>
                </div>
            </div>
        </xpath>
    </t>
</templates>